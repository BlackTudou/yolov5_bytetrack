# 提高人员检测精度的设置

## 已优化的默认参数
我已经优化了默认参数以提高检测率：
- ✅ 置信度阈值：0.25（更低，检测更多）
- ✅ 输入图像尺寸：1280（更大，更准确）

## 推荐的运行命令

### 1. 标准精度（平衡速度和准确度）
```bash
python main.py --source video --video palace.mp4 --device cpu
```

### 2. 高精度模式（更准确但较慢）
```bash
python main.py --source video --video palace.mp4 --device cpu --img-size 1920 --conf 0.2
```

### 3. 极限精度模式（最准确但很慢）
```bash
python main.py --source video --video palace.mp4 --device cpu --img-size 2240 --conf 0.15
```

### 4. GPU加速模式（如果有NVIDIA GPU）
```bash
python main.py --source video --video palace.mp4 --device cuda --img-size 1280 --conf 0.25
```

## 参数说明

| 参数 | 说明 | 推荐值 | 影响 |
|------|------|--------|------|
| `--conf` | 置信度阈值 | 0.15-0.3 | 越小检测越多，但可能有误检 |
| `--img-size` | 输入图像尺寸 | 640-1920 | 越大检测越准，但速度越慢 |
| `--device` | 运行设备 | cpu/cuda | GPU更快 |

## 不同场景的建议

### 人员稀疏场景（人员较少）
```bash
--conf 0.3 --img-size 640
```

### 人员密集场景（很多人）
```bash
--conf 0.2 --img-size 1280
```

### 远距离检测（人员较小）
```bash
--conf 0.15 --img-size 1920
```

### 实时监控（需要速度快）
```bash
--conf 0.3 --img-size 640 --device cuda
```

## 性能优化技巧

### 1. 使用GPU加速
如果有NVIDIA GPU，优先使用 `--device cuda`

### 2. 调整输入尺寸
- 视频720p或更小：使用 `--img-size 640`
- 视频1080p：使用 `--img-size 1280`
- 视频4K或更大：使用 `--img-size 1920`

### 3. 平衡速度和精度
如果检测速度太慢：
```bash
--img-size 640 --conf 0.3
```

如果检测不完整：
```bash
--img-size 1280 --conf 0.2
```

## 验证优化效果

运行后检查：
1. 检测到的人数是否增加
2. 是否能检测到更远的人员
3. FPS是否在可接受范围内（>10 FPS）

## 故障排除

### 检测太多误检
```bash
--conf 0.3  # 提高阈值
```

### 检测不完整
```bash
--conf 0.2 --img-size 1280  # 降低阈值，增大尺寸
```

### 速度太慢
```bash
--img-size 640  # 减小输入尺寸
或使用GPU: --device cuda
```

